<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content='"How to construct and interact with ePydRo and its data"
'>
<title>An_end_to_end_epydro_tutorial • ePydRo</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="An_end_to_end_epydro_tutorial">
<meta property="og:description" content='"How to construct and interact with ePydRo and its data"
'>
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ePydRo</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.8</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/NOAA-OWP/ePydRo/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>An_end_to_end_epydro_tutorial</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/NOAA-OWP/ePydRo/blob/HEAD/vignettes/An_end_to_end_epydro_tutorial.Rmd" class="external-link"><code>vignettes/An_end_to_end_epydro_tutorial.Rmd</code></a></small>
      <div class="d-none name"><code>An_end_to_end_epydro_tutorial.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<p>eHydro can be a complicated database to work with when you come at
the problem with the sole objective of leaving with a .tif file of
bathymetry in hand for use in your workflow.</p>
<p>This tutorial will guide you through the motions of installing and
running ePydRo on your own hardware through to walking away with a tif
in hand, but will be greatly aided if you choose an area more meaningful
to you that has a survey. ePydRo can process most but not all of the
footprints tracked on the offical <a href="https://www.arcgis.com/apps/dashboards/4b8f2ba307684cf597617bf1b6d2f85d" class="external-link">USACE
Hydrographic Survey (eHydro) survey database dashboard</a>.</p>
</div>
<div class="section level2">
<h2 id="installiung">Installiung<a class="anchor" aria-label="anchor" href="#installiung"></a>
</h2>
<p>I’ll assume you’ve already got an installation of R and RStudio on
your computer but if not follow the instructions laid out here and then
come back to this page.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/load_all.html" class="external-link">load_all</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># remotes::install_github("NOAA-OWP/ePydRo")    # If it asks for package updates: press 1</span></span>
<span><span class="fu">ePydRo</span><span class="fu">::</span><span class="fu"><a href="../reference/marco.html">marco</a></span><span class="op">(</span><span class="op">)</span>                           <span class="co"># A "hello world" test</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="running">Running<a class="anchor" aria-label="anchor" href="#running"></a>
</h2>
<p>Running ePydRo involves staging data on your hard drive for future
access so we need to provide a path for us to write all those files out
to. Do this with the following:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ehydro_root</span> <span class="op">&lt;-</span> <span class="st">"C:/Users/james.coll/Desktop/root/data/ePydRo"</span></span>
<span><span class="fu">ePydRo</span><span class="fu">::</span><span class="fu"><a href="../reference/collect_ehydro.html">collect_ehydro</a></span><span class="op">(</span><span class="va">ehydro_root</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="scraping">Scraping<a class="anchor" aria-label="anchor" href="#scraping"></a>
</h2>
<p>Having now established our directory to work in, we’ll start by
processing some of the survbeys into their entwined form. Since I’m
interested in using data around puerto-rico, I’ll filter the available
surveys to just those ones.</p>
<div class="section level3">
<h3 id="surveys-around-puerto-rico-virgin-islands">Surveys around puerto-rico-virgin-islands<a class="anchor" aria-label="anchor" href="#surveys-around-puerto-rico-virgin-islands"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">epydro_tracker</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">ehydro_root</span>,<span class="st">"epydro_SurveyJob.fgb"</span>,fsep <span class="op">=</span> <span class="va">.Platform</span><span class="op">$</span><span class="va">file.sep</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">pr_surveys</span> <span class="op">&lt;-</span> <span class="va">epydro_tracker</span><span class="op">[</span><span class="fu">AOI</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/AOI/man/geoCode.html" class="external-link">geocode</a></span><span class="op">(</span><span class="st">"Puerto Rico"</span> ,bbox <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_buffer</a></span><span class="op">(</span>dist <span class="op">=</span> <span class="fl">7000</span><span class="op">)</span>,<span class="op">]</span></span>
<span><span class="fu">mapview</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/mapview/man/mapView.html" class="external-link">mapview</a></span><span class="op">(</span><span class="va">pr_surveys</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="writing-out-arco-data">Writing out ARCO data<a class="anchor" aria-label="anchor" href="#writing-out-arco-data"></a>
</h3>
<p>I’m not the largest fan of the “Analysis-ready cloud optimized”
(ARCO) acronym but the one-two punch of transforming a survey to an
entwine point cloud and then a flexible rasterization to give you the
final tif is what we’re going to do next. This “ARCO” step is critical
as the data needs to be reprojected and datum normalized before we
attempt to make a useful modeling surface out of it.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ePydRo</span><span class="fu">::</span><span class="fu"><a href="../reference/scrape_and_transform.html">scrape_and_transform</a></span><span class="op">(</span><span class="va">ehydro_root</span>,process_index <span class="op">=</span> <span class="va">pr_surveys</span><span class="op">[</span><span class="fl">3</span>,<span class="op">]</span><span class="op">$</span><span class="va">sheet_index</span>,overwrite<span class="op">=</span><span class="cn">FALSE</span>,vdatum_domain_override<span class="op">=</span><span class="st">'prvi'</span>,is_quiet <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="writing-out-useable-data">Writing out “useable” data<a class="anchor" aria-label="anchor" href="#writing-out-useable-data"></a>
</h3>
<p>While that normalized point cloud is the heart of this data, most
workflows require that tif surface so to give us that we’ll call the
following which needs a path to a directory you want to write that file
out to.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ePydRo</span><span class="fu">::</span><span class="fu"><a href="../reference/to_tiff_and_stage.html">to_tiff_and_stage</a></span><span class="op">(</span>ehydro_root <span class="op">=</span> <span class="st">"~/data/ePydRo"</span>,process_index <span class="op">=</span> <span class="va">pr_survey</span><span class="op">[</span><span class="fl">3</span>,<span class="op">]</span><span class="op">$</span><span class="va">sheet_index</span>,overwrite<span class="op">=</span><span class="cn">FALSE</span>,vdatum_domain_override<span class="op">=</span><span class="cn">NULL</span>,is_quiet <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu">mapview</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/mapview/man/mapView.html" class="external-link">mapview</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Huzzah, We now have the data we need to move on with our initial
modeling task!</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jim Coll, <a href="https://water.noaa.gov/about/nwm" class="external-link"><img src="https://raw.githubusercontent.com/NOAA-OWP/RRASSLER/refs/heads/dev/man/figures/noaa-logo.png" height="36" alt="NOAA OWP"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
